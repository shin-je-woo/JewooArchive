# Previous
* ìŠ¤í”„ë§ ë°ì´í„° JPAëŠ” ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ê¸°ëŠ¥ìœ¼ë¡œ ì œê³µí•˜ì§€ ëª»í•˜ëŠ” ì¿¼ë¦¬ë“¤ì„ ì•„ë˜ ê¸°ëŠ¥ë“¤ì„ í†µí•´ ì œê³µí•  ìˆ˜ ìˆë‹¤.
	* ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±
	* NamedQuery
	* @Query - ë¦¬íŒŒì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ ì •ì˜
	* íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
	* ë°˜í™˜ íƒ€ì…
	* í˜ì´ì§•ê³¼ ì •ë ¬
	* ë²Œí¬ì„± ìˆ˜ì • ì¿¼ë¦¬
	* @EntityGraph
	
# ğŸ’¡ ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„±
ë©”ì†Œë“œ ì´ë¦„ì„ ë¶„ì„í•´ì„œ JPQL ì¿¼ë¦¬ ì‹¤í–‰

â–¶ï¸ ìˆœìˆ˜ JPA ë¦¬í¬ì§€í† ë¦¬
```java
public List<Member> findByUsernameAndAgeGreaterThan(String username, int age) {
	return em.createQuery(
				"select m from Member m" +
				" where m.username = :username" +
				" and m.age > :age", Member.class)
		.setParameter("username", username)
		.setParameter("age", age)
		.getResultList();
}
```
â–¶ï¸ ìŠ¤í”„ë§ ë°ì´í„° JPA
```java
List<Member> findByUsernameAndAgeGreaterThan(String username, int age);
```
* ìŠ¤í”„ë§ ë°ì´í„° JPAëŠ” ë©”ì†Œë“œ ì´ë¦„ì„ ë¶„ì„í•´ì„œ JPQLì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•œë‹¤.
* [ì¿¼ë¦¬ ë©”ì†Œë“œ í•„í„° ì¡°ê±´ - ìŠ¤í”„ë§ ë°ì´í„° JPA ê³µì‹ ë¬¸ì„œ](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation)
* ì¡°íšŒ: findâ€¦By ,readâ€¦By ,queryâ€¦By getâ€¦By  
  ex) findHelloBy ì²˜ëŸ¼ ...ì— ì‹ë³„í•˜ê¸° ìœ„í•œ ë‚´ìš©(ì„¤ëª…)ì´ ë“¤ì–´ê°€ë„ ëœë‹¤.
* COUNT: countâ€¦By ë°˜í™˜íƒ€ì… long
* EXISTS: existsâ€¦By ë°˜í™˜íƒ€ì… boolean
* ì‚­ì œ: deleteâ€¦By, removeâ€¦By ë°˜í™˜íƒ€ì… long
* DISTINCT: findDistinct, findMemberDistinctBy
* LIMIT: findFirst3, findFirst, findTop, findTop3

# ğŸ’¡ JPA NamedQuery
JPAì˜ NamedQueryë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
â–¶ï¸ Entity ì— @NamedQuery ë¥¼ ì •ì˜
```java
@Entity
@NamedQuery(name="Member.findByUsername",
            query="select m from Member m where m.username = :username"
            )
public class Member {
	...
}
```
â–¶ï¸ ìˆœìˆ˜ JPAë¥¼ ì´ìš©í•œ NamedQuery í˜¸ì¶œ
```java
public class MemberRepository {
    public List<Member> findByUsername(String username) { 
        ...
        List<Member> resultList = em.createNamedQuery("Member.findByUsername", Member.class)
                                    .setParameter("username", username)
                                    .getResultList();
    } 
}
```

â–¶ï¸ ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì´ìš©í•œ NamedQuery ì‚¬ìš©
```java
@Query(name = "Member.findByUsername")
List<Member> findByUsername(@Param("username") String username);
```
* @Query ë¥¼ ìƒëµí•˜ê³  ë©”ì„œë“œ ì´ë¦„ë§Œìœ¼ë¡œ Named ì¿¼ë¦¬ë¥¼ í˜¸ì¶œí•  ìˆ˜ë„ ìˆë‹¤.

> ì°¸ê³   
> ìŠ¤í”„ë§ ë°ì´í„° JPAë¥¼ ì‚¬ìš©í•˜ë©´ ì‹¤ë¬´ì—ì„œ Named Queryë¥¼ ì§ì ‘ ë“±ë¡í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¼ì€ ë“œë¬¼ë‹¤.  
> ëŒ€ì‹  @Query ë¥¼ ì‚¬ìš©í•´ì„œ ë¦¬íŒŒì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì •ì˜í•œë‹¤.

# ğŸ’¡ @Query, ë¦¬í¬ì§€í† ë¦¬ ë©”ì†Œë“œì— ì¿¼ë¦¬ ì •ì˜í•˜ê¸°
â–¶ï¸ ë©”ì„œë“œì— JPQL ì¿¼ë¦¬ ì‘ì„±
```java
@Query("select m from Member m where m.username = :username and m.age = :age")
List<Member> findMember(@Param("username") String username, @Param("age") int age);
```
* `@org.springframework.data.jpa.repository.Query` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©
* ì‹¤í–‰í•  ë©”ì„œë“œì— ì •ì  ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì‘ì„±í•˜ë¯€ë¡œ ì´ë¦„ ì—†ëŠ” Named ì¿¼ë¦¬ë¼ í•  ìˆ˜ ìˆë‹¤.
* JPA Named ì¿¼ë¦¬ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì ì— ë¬¸ë²• ì˜¤ë¥˜ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆë‹¤. (ë§¤ìš° í° ì¥ì !)

> ì°¸ê³   
> ì‹¤ë¬´ì—ì„œëŠ” ë©”ì†Œë“œ ì´ë¦„ìœ¼ë¡œ ì¿¼ë¦¬ ìƒì„± ê¸°ëŠ¥ì€ íŒŒë¼ë¯¸í„°ê°€ ì¦ê°€í•˜ë©´ ë©”ì„œë“œ ì´ë¦„ì´ ë§¤ìš° ì§€ì €ë¶„í•´ì§„ë‹¤.   
> ë”°ë¼ì„œ @Query ê¸°ëŠ¥ì„ ìì£¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.

# ğŸ’¡ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì€ ìœ„ì¹˜ê¸°ë°˜ ë°”ì¸ë”©ê³¼ ì´ë¦„ ê¸°ë°˜ ë°”ì¸ë”© ë‘ê°€ì§€ê°€ ìˆë‹¤. 
```java
select m from Member m where m.username = ?0 //ìœ„ì¹˜ ê¸°ë°˜ 
select m from Member m where m.username = :name //ì´ë¦„ ê¸°ë°˜
```
### ì´ë¦„ê¸°ë°˜ ë°”ì¸ë”©ì„ ì‚¬ìš©í•˜ì
* ìœ„ì¹˜ ê¸°ë°˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì€ í•´ë‹¹ ìœ„ì¹˜ì— ì–´ë–¤ íŒŒë¼ë¯¸í„°ê°€ ë§¤í•‘ë˜ëŠ”ì§€ ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³ , ì¶”í›„ ê¸°ëŠ¥ë³€ê²½ìœ¼ë¡œ ì¸í•´ ì¤‘ê°„ì— ë‹¤ë¥¸ íŒŒë¼ë¯¸í„°ê°€ ì¶”ê°€ë  ê²½ìš° ì—ëŸ¬ê°€ ë‚  í™•ë¥ ì´ ë†’ë‹¤.
* ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ì„œ ì´ë¦„ ê¸°ë°˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.

```java
import org.springframework.data.repository.query.Param
public interface MemberRepository extends JpaRepository<Member, Long> {
		@Query("select m from Member m where m.username = :name")
		Member findMembers(@Param("name") String username);
}
```

### ì»¬ë ‰ì…˜ íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
`Collection` íƒ€ì…ìœ¼ë¡œ inì ˆ ì§€ì›ì´ ê°€ëŠ¥í•˜ë‹¤.
```java
@Query("select m from Member m where m.username in :names")
List<Member> findByNames(@Param("names") List<String> names);
```
