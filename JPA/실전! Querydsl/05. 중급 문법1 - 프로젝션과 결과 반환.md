# ğŸ’¡ í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - ê¸°ë³¸
- í”„ë¡œì ì…˜ì€ select ëŒ€ìƒì„ ì§€ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- Querydslì„ ì´ìš©í•´ entityì „ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¡°íšŒ ëŒ€ìƒì„ ì§€ì •í•´ ì›í•˜ëŠ” ê°’ë§Œ ì¡°íšŒí•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.

## í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ì¸ ê²½ìš°
```java
@Test
void simpleProjection() {
    List<String> fetch = queryFactory
            .select(member.username)
            .from(member)
            .fetch();
}
```
- í”„ë¡œì ì…˜ ëŒ€ìƒì´ í•˜ë‚˜ë©´ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.( `List<String>` )
- í”„ë¡œì ì…˜ ëŒ€ìƒì´ ë‘˜ ì´ìƒì´ë©´ íŠœí”Œì´ë‚˜ DTOë¡œ ì¡°íšŒí•œë‹¤.

## í”„ë¡œì ì…˜ ëŒ€ìƒì´ ì—¬ëŸ¬ ê°œì¸ ê²½ìš° - íŠœí”Œ ì¡°íšŒ
```java
@Test
void tupleProjection() {
    List<Tuple> result = queryFactory
            .select(member.username, member.age)
            .from(member)
            .fetch();

    for (Tuple tuple : result) {
        String username = tuple.get(member.username);
        Integer age = tuple.get(member.age);
        System.out.println("username = " + username);
        System.out.println("age = " + age);
    }
}
```

# ğŸ’¡ í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - DTO ì¡°íšŒ
### âœ… Querydsl ë¹ˆ ìƒì„±(Bean population)
- Querydslì—ì„œëŠ” ê²°ê³¼ë¥¼ DTO ë°˜í™˜í•  ë•Œ ë‹¤ìŒ 3ê°€ì§€ ë°©ì‹ì„ ì§€ì›í•œë‹¤.
- í”„ë¡œí¼í‹° ì ‘ê·¼
- í•„ë“œ ì§ì ‘ ì ‘ê·¼
- ìƒì„±ì ì‚¬ìš©

## í”„ë¡œí¼í‹° ì ‘ê·¼
```java
@Test
void findDtoBySetter() {
    List<MemberDto> result = queryFactory
            .select(Projections.bean(MemberDto.class,
                    member.username,
                    member.age))
            .from(member)
            .fetch();
}
```
- `Projections.bean`
- **setter(bean)** ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì¸ì ì…˜ í•´ì£¼ë©° **ê¸°ë³¸ ìƒì„±ìê°€ ë¬´ì¡°ê±´ í•„ìš”**í•˜ë‹¤.

## í•„ë“œ ì§ì ‘ ì ‘ê·¼
```java
@Test
void findDtoByField() {
    List<MemberDto> result = queryFactory
            .select(Projections.fields(MemberDto.class,
                    member.username,
                    member.age))
            .from(member)
            .fetch();
}
```
- `Projections.fields`
- setterì™€ ê¸°ë³¸ ìƒì„±ìê°€ ì—†ì–´ë„ ë™ì‘í•œë‹¤.

## ë³„ì¹­ì´ ë‹¤ë¥¼ ë•Œ
```java
@Test
void findUserDto() {
    QMember memberSub = new QMember("memberSub");

    List<UserDto> result = queryFactory
            .select(Projections.fields(UserDto.class,
                    member.username.as("name"),
                    ExpressionUtils.as(
                            JPAExpressions
                                    .select(memberSub.age.max())
                                    .from(memberSub), "age")
                    )
            )
            .from(member)
            .fetch();
}
```
- í”„ë¡œí¼í‹°ë‚˜, í•„ë“œ ì ‘ê·¼ ìƒì„± ë°©ì‹ì—ì„œ ì´ë¦„ì´ ë‹¤ë¥¼ ë•Œ í•´ê²° ë°©ì•ˆ
- `ExpressionUtils.as(source,alias)` : í•„ë“œë‚˜ ì„œë¸Œ ì¿¼ë¦¬ì— ë³„ì¹­ ì ìš©
- `username.as("memberName")` : í•„ë“œì— ë³„ì¹­ ì ìš©

## ìƒì„±ì ë°©ì‹
```java
@Test
void findDtoByConstructor() {
    List<MemberDto> result = queryFactory
            .select(Projections.constructor(MemberDto.class,
                    member.username,
                    member.age))
            .from(member)
            .fetch();
}
```
- `Projections.constructor`
- í”„ë¡œì ì…˜ ëŒ€ìƒì— ë§ëŠ” ìƒì„±ìê°€ í˜¸ì¶œëœë‹¤.

# ğŸ’¡ í”„ë¡œì ì…˜ê³¼ ê²°ê³¼ ë°˜í™˜ - @QueryProjection
```java
@Data
@NoArgsConstructor
public class MemberDto {

    private String username;
    private int age;

    @QueryProjection
    public MemberDto(String username, int age) {
        this.username = username;
        this.age = age;
    }
}
```
```java
@Test
void findDtoByQueryProjection() {
    List<MemberDto> result = queryFactory
            .select(new QMemberDto(member.username, member.age))
            .from(member)
            .fetch();
}
```
- `@QueryProjection` ì–´ë…¸í…Œì´ì…˜ì„ ë‹¬ì•„ì£¼ê³ , compileQuerydslì„ ì‹¤í–‰í•´ì£¼ë©´ DTOë„ QíŒŒì¼ë¡œ ìƒì„±ì„ í•´ì¤€ë‹¤.
- QueryProjection ë°©ì‹ì€ ì»´íŒŒì¼ëŸ¬ë¡œ íƒ€ì…ì„ ì²´í¬í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê°€ì¥ ì•ˆì „í•œ ë°©ë²•ì´ë‹¤.
- í•˜ì§€ë§Œ DTOê°€ QueryDSLì— ì¢…ì†ì ì¸ ì ê³¼ DTOê¹Œì§€ QíŒŒì¼ì„ ìƒì„±í•´ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤.
