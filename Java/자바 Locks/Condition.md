# Previous

- Condition μ€ μ΅°κ±΄ λ³€μ λλ” μ΅°κ±΄ νλ΅ μ•λ ¤μ§„ κ°μ²΄λ΅μ„ Lock κ³Ό κ²°ν•©ν•μ—¬ κ°μ²΄ λ‹Ή μ—¬λ¬ κ°μ Wait Queue λ¥Ό κ°€μ§€λ” ν¨κ³Όλ¥Ό μ κ³µν•λ‹¤.
- Lock μ΄ synchronized λ©”μ„λ“μ™€ λ¬Έμ¥μ μ‚¬μ©μ„ λ€μ²΄ν•λ” κ²ƒμ²λΌ Conditionμ€ Object λ¨λ‹ν„° λ©”μ„λ“ (wait, notify and notifyAll) μ μ‚¬μ©μ„ λ€μ²΄ν•λ©° Lock μ— λ°”μΈλ”©λλ‹¤.
- Condition μ€ ν• μ¤λ λ“κ°€ λ‹¤λ¥Έ μ¤λ λ“λ΅λ¶€ν„° μ–΄λ–¤ μƒνƒ μ΅°κ±΄μ΄ μ°Έμ΄ λ  μ μλ‹¤λ” ν†µμ§€λ¥Ό λ°›μ„ λ•κΉμ§€ μ‹¤ν–‰μ„ μ¤‘λ‹¨ν•λ„λ΅ ν•λ” μλ‹¨μ„ μ κ³µν•λ‹¤.
- Condition μ κ°€μ¥ μ¤‘μ”ν• νΉμ„±μ€ λ½μ„ μ›μμ μΌλ΅ ν•΄μ ν•κ³  ν„μ¬ μ¤λ λ“λ¥Ό μ¤‘λ‹¨ν•λ” κ²ƒμ΄λ©° μ΄λ” Object.wait() λ©”μ„λ“μ™€ λ™μΌν•κ² λ™μ‘ν•λ‹¤.

![image](https://github.com/shin-je-woo/TIL/assets/39439576/874bac5f-42f4-4ba8-ab1f-03ce42e7437d)

# π’΅ νλ¦„λ„

![image](https://github.com/shin-je-woo/TIL/assets/39439576/e3a39edf-9a16-4955-b4c7-d24c2330c469)

# π’΅ Condition API

### void await() throws InterruptedException

- ν„μ¬ μ¤λ λ“κ°€ λ‹¤μ λ„¤ κ°€μ§€ μ¤‘ ν•λ‚κ°€ λ°μƒν•  λ•κΉμ§€ λ€κΈ°ν•κ² λλ©° μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ€ μ›μμ μΌλ΅ ν•΄μ λλ‹¤.
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signal() λ©”μ„λ“λ¥Ό νΈμ¶ν•κ³  ν„μ¬ μ¤λ λ“κ°€ κΉ¨μ–΄λ‚  μ¤λ λ“λ΅ μ„ νƒλλ” κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signalAll() λ©”μ„λ“λ¥Ό νΈμ¶ν• κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ ν„μ¬ μ¤λ λ“λ¥Ό μΈν„°λ½νΈν•κ³  μ¤λ λ“ μ¤‘λ‹¨μ μΈν„°λ½μ…μ„ μ§€μ›ν•λ” κ²½μ°
  - μλ―Έ μ—†λ” κΉ¨μ–΄λ‚¨(spurious wakeup) μ΄ λ°μƒν• κ²½μ°
- μ΄ λ©”μ„λ“κ°€ λ°ν™λκΈ° μ „μ— ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ‹¤μ‹ νλ“ν•΄μ•Ό ν•λ‹¤.
- λ©”μ„λ“ νΈμ¶ μ‹ μ¤λ λ“κ°€ μΈν„°λ½νΈ μƒνƒλ΅ μ„¤μ •λμ–΄ μκ±°λ‚ λλ” λ€κΈ° μ¤‘μ— μΈν„°λ½νΈλλ” κ²½μ° InterruptedException μ΄ λ°μƒν•κ³  ν„μ¬ μ¤λ λ“μ μΈν„°λ½νΈ μƒνƒκ°€ μ΄κΈ°ν™”λλ‹¤.
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

### void awaitUninterruptibly()

- ν„μ¬ μ¤λ λ“κ°€ λ‹¤μ λ„¤ κ°€μ§€ μ¤‘ ν•λ‚κ°€ λ°μƒν•  λ•κΉμ§€ λ€κΈ°ν•κ² λλ©° μ΄ Conditionκ³Ό κ΄€λ ¨λ λ½μ€ μ›μμ μΌλ΅ ν•΄μ λλ‹¤.
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signal() λ©”μ„λ“λ¥Ό νΈμ¶ν•κ³  ν„μ¬ μ¤λ λ“κ°€ κΉ¨μ–΄λ‚  μ¤λ λ“λ΅ μ„ νƒλλ” κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signalAll() λ©”μ„λ“λ¥Ό νΈμ¶ν• κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ ν„μ¬ μ¤λ λ“λ¥Ό μΈν„°λ½νΈν•κ³  μ¤λ λ“ μ¤‘λ‹¨μ μΈν„°λ½μ…μ„ μ§€μ›ν•λ” κ²½μ°
  - μλ―Έ μ—†λ” κΉ¨μ–΄λ‚¨(spurious wakeup) μ΄ λ°μƒν• κ²½μ°
- μ΄ λ©”μ„λ“κ°€ λ°ν™λκΈ° μ „μ— ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ‹¤μ‹ νλ“ν•΄μ•Ό ν•λ‹¤.
- **λ©”μ„λ“ νΈμ¶ μ‹ μ¤λ λ“κ°€ μΈν„°λ½νΈ μƒνƒλ΅ μ„¤μ •λμ–΄ μκ±°λ‚ λλ” λ€κΈ° μ¤‘μ— μΈν„°λ½νΈ λλ”λΌλ„ μ‹κ·Έλ„μ„ λ°›μ„ λ• κΉμ§€ κ³„μ† λ€κΈ°ν•λ©° ν„μ¬ μ¤λ λ“μ μΈν„°λ½νΈ μƒνƒλ” μ μ§€λλ‹¤.**
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

### long awaitNanos(long nanosTimeout) throws InterruptedException

- ν„μ¬ μ¤λ λ“κ°€ λ‹¤μ λ„¤ κ°€μ§€ μ¤‘ ν•λ‚κ°€ λ°μƒν•  λ•κΉμ§€ λ€κΈ°ν•κ² λλ©° μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ€ μ›μμ μΌλ΅ ν•΄μ λλ‹¤.
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signal() λ©”μ„λ“λ¥Ό νΈμ¶ν•κ³  ν„μ¬ μ¤λ λ“κ°€ κΉ¨μ–΄λ‚  μ¤λ λ“λ΅ μ„ νƒλλ” κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signalAll() λ©”μ„λ“λ¥Ό νΈμ¶ν• κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ ν„μ¬ μ¤λ λ“λ¥Ό μΈν„°λ½νΈν•κ³  μ¤λ λ“ μ¤‘λ‹¨μ μΈν„°λ½μ…μ„ μ§€μ›ν•λ” κ²½μ°
  - μλ―Έ μ—†λ” κΉ¨μ–΄λ‚¨(spurious wakeup) μ΄ λ°μƒν• κ²½μ°
- μ΄ λ©”μ„λ“κ°€ λ°ν™λκΈ° μ „μ— ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ‹¤μ‹ νλ“ν•΄μ•Ό ν•λ‹¤.
- **μ΄ λ©”μ„λ“λ” μ§€μ •λ λ‚λ…Έμ΄ κ°’μ— λ€ν• λ‚¨μ€ λ‚λ…Έμ΄μ μ¶”μ •μΉλ¥Ό λ°ν™ν•κ±°λ‚ μ‹κ°„μ΄ μ΄κ³Όλ κ²½μ° 0λ³΄λ‹¤ μ‘κ±°λ‚ κ°™μ€ κ°’μ„ λ°ν™ν•λ‹¤.**
- **μ§€μ •λ λ‚λ…Έμ΄ μ‹κ°„μ΄ κ²½κ³Όν•  λ•κΉμ§€ λ€κΈ°ν•λ„λ΅ ν•λ‹¤.**
- λ©”μ„λ“ νΈμ¶ μ‹ μ¤λ λ“κ°€ μΈν„°λ½νΈ μƒνƒλ΅ μ„¤μ •λμ–΄ μκ±°λ‚ λλ” λ€κΈ° μ¤‘μ— μΈν„°λ½νΈλλ” κ²½μ° InterruptedExceptionμ΄ λ°μƒν•κ³  ν„μ¬ μ¤λ λ“μ μΈν„°λ½νΈ μƒνƒκ°€ μ΄κΈ°ν™”λλ‹¤.
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

### boolean await(long time, TimeUnit unit) throws InterruptedException

- ν„μ¬ μ¤λ λ“κ°€ λ‹¤μ λ„¤ κ°€μ§€ μ¤‘ ν•λ‚κ°€ λ°μƒν•  λ•κΉμ§€ λ€κΈ°ν•κ² λλ©° μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ€ μ›μμ μΌλ΅ ν•΄μ λλ‹¤.
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signal() λ©”μ„λ“λ¥Ό νΈμ¶ν•κ³  ν„μ¬ μ¤λ λ“κ°€ κΉ¨μ–΄λ‚  μ¤λ λ“λ΅ μ„ νƒλλ” κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signalAll() λ©”μ„λ“λ¥Ό νΈμ¶ν• κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ ν„μ¬ μ¤λ λ“λ¥Ό μΈν„°λ½νΈν•κ³  μ¤λ λ“ μ¤‘λ‹¨μ μΈν„°λ½μ…μ„ μ§€μ›ν•λ” κ²½μ°
  - μλ―Έ μ—†λ” κΉ¨μ–΄λ‚¨(spurious wakeup) μ΄ λ°μƒν• κ²½μ°
- μ΄ λ©”μ„λ“κ°€ λ°ν™λκΈ° μ „μ— ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ‹¤μ‹ νλ“ν•΄μ•Ό ν•λ‹¤.
- **μ§€μ •λ λ€κΈ° μ‹κ°„μ΄ κ²½κ³Όν•  λ•κΉμ§€ λ€κΈ°ν•λ„λ΅ ν•λ‹¤. μ΄ λ©”μ„λ“λ” awaitNanos(unit.toNanos(time)) > 0 κ°™μ€ λ™μ‘μ„ ν•λ‹¤.**
- λ©”μ„λ“ νΈμ¶ μ‹ μ¤λ λ“κ°€ μΈν„°λ½νΈ μƒνƒλ΅ μ„¤μ •λμ–΄ μκ±°λ‚ λλ” λ€κΈ° μ¤‘μ— μΈν„°λ½νΈλλ” κ²½μ° InterruptedExceptionμ΄ λ°μƒν•κ³  ν„μ¬ μ¤λ λ“μ μΈν„°λ½νΈ μƒνƒκ°€ μ΄κΈ°ν™”λλ‹¤.
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

### boolean awaitUntil(Date deadline) throws InterruptedException

- ν„μ¬ μ¤λ λ“κ°€ λ‹¤μ λ„¤ κ°€μ§€ μ¤‘ ν•λ‚κ°€ λ°μƒν•  λ•κΉμ§€ λ€κΈ°ν•κ² λλ©° μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ€ μ›μμ μΌλ΅ ν•΄μ λλ‹¤.
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signal() λ©”μ„λ“λ¥Ό νΈμ¶ν•κ³  ν„μ¬ μ¤λ λ“κ°€ κΉ¨μ–΄λ‚  μ¤λ λ“λ΅ μ„ νƒλλ” κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ μ΄ Conditionμ— λ€ν•΄ signalAll() λ©”μ„λ“λ¥Ό νΈμ¶ν• κ²½μ°
  - λ‹¤λ¥Έ μ¤λ λ“κ°€ ν„μ¬ μ¤λ λ“λ¥Ό μΈν„°λ½νΈν•κ³  μ¤λ λ“ μ¤‘λ‹¨μ μΈν„°λ½μ…μ„ μ§€μ›ν•λ” κ²½μ°
  - μλ―Έ μ—†λ” κΉ¨μ–΄λ‚¨(spurious wakeup) μ΄ λ°μƒν• κ²½μ°
- λ¨λ“  κ²½μ°μ— μ΄ λ©”μ„λ“κ°€ λ°ν™λκΈ° μ „μ— ν„μ¬ μ¤λ λ“λ” μ΄ μ΅°κ±΄κ³Ό κ΄€λ ¨λ λ½μ„ λ‹¤μ‹ νλ“ν•΄μ•Ό ν•λ©° μ¤λ λ“κ°€ λ°ν™λλ©΄ ν•΄λ‹Ή λ½μ„ λ³΄μ ν•λ” κ²ƒμ΄ λ³΄μ¥λλ‹¤.
- **μ§€μ •λ λ§κ° μ‹κ°„μ΄ κ²½κ³Όν•  λ•κΉμ§€ λ€κΈ°ν•λ„λ΅ ν•λ‹¤. μ΄ λ©”μ„λ“μ λ°ν™ κ°’μ€ λ§κ° μ‹κ°„μ΄ κ²½κ³Όν–λ”μ§€ μ—¬λ¶€λ¥Ό λ‚νƒ€λ‚Έλ‹¤.**
- λ©”μ„λ“ νΈμ¶ μ‹ μΈν„°λ½νΈ μƒνƒκ°€ μ„¤μ •λμ–΄ μκ±°λ‚ λλ” λ€κΈ° μ¤‘μ— μΈν„°λ½νΈλλ” κ²½μ° InterruptedExceptionμ΄ λ°μƒν•κ³  ν„μ¬ μ¤λ λ“μ μΈν„°λ½νΈ μƒνƒκ°€ μ΄κΈ°ν™”λλ‹¤.
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

### void signal()

- λ€κΈ° μ¤‘μΈ μ¤λ λ“ ν•λ‚λ¥Ό κΉ¨μ°λ©° μ΄ Condition μ—μ„ λ€κΈ° μ¤‘μΈ μ¤λ λ“κ°€ μλ‹¤λ©΄ κ·Έ μ¤‘ ν•λ‚κ°€ κΉ¨μ–΄λ‚λ‹¤.
- κΉ¨μ–΄λ‚ μ¤λ λ“λ” awaitμ—μ„ λ°ν™λκΈ° μ „μ— λ‹¤μ‹ λ½μ„ νλ“ν•΄μ•Ό ν•λ‹¤.
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

### void signalAll()

- λ¨λ“  λ€κΈ° μ¤‘μΈ μ¤λ λ“λ¥Ό κΉ¨μ°λ©° λ§μ•½ μ–΄λ–¤ μ¤λ λ“κ°€ μ΄ Condition μ— λ€ν•΄ λ€κΈ° μ¤‘μ΄λΌλ©΄ λ¨λ“  λ€κΈ° μ¤‘μΈ μ¤λ λ“κ°€ κΉ¨μ–΄λ‚λ‹¤.
- κ° μ¤λ λ“λ” await μ—μ„ λ°ν™λκΈ° μ „μ— λ½μ„ λ‹¤μ‹ μ–»μ–΄μ•Ό ν•λ‹¤.
- λ©”μ„λ“κ°€ νΈμ¶λ  λ• ν„μ¬ μ¤λ λ“λ” μ΄ Condition κ³Ό κ΄€λ ¨λ λ½μ„ λ³΄μ ν•κ³  μμ–΄μ•Ό ν•λ©° κ·Έλ ‡μ§€ μ•μ€κ²½μ° IllegalMonitorStateException μμ™Έκ°€ λ°μƒν•λ‹¤.

# π’΅ Condition κΈ°λ³Έ κµ¬ν„

![image](https://github.com/shin-je-woo/TIL/assets/39439576/861e2065-54e0-4d30-96ad-f00c7c76d5eb)

# π’΅ signalAll() λ³΄λ‹¤ signal() μ„ ν™μ©ν•λΌ

- Condition μ—μ„ μ‹ νΈλ¥Ό μ•λ¦΄ λ• signalAll() λ³΄λ‹¤ signal()μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ λ‹¤μ¤‘ μ΅°κ±΄μ„ λ‹¤λ£¨λ” λ”μ± ν¨κ³Όμ μΈ λ°©λ²•μΌ μ μλ‹¤.
- ν• κ°μ Lock κ°μ²΄μ—μ„ μƒμ„±ν• μ—¬λ¬ κ°μ Conditionμ€ νΉμ •ν• μ΅°κ±΄μ— λ”°λΌ μ¤λ λ“λ¥Ό κµ¬λ¶„ν•΄μ„ κ΄€λ¦¬ν•¨μΌλ΅ λ―Έμ„Έν• μ μ–΄λ¥Ό κ°€λ¥ν•κ² ν•΄μ¤€λ‹¤.
- μ—¬λ¬ κ°μ μ΅°κ±΄μ΄ μμ„ λ• λ¨λ“  μ¤λ λ“λ¥Ό λ™μ‹μ— κΉ¨μ°λ©΄ κ²½μ μƒνƒκ°€ λ°μƒν•  μ μμΌλ‚ Condition μ„ μ—¬λ¬ κ° μ‚¬μ©ν•λ©΄ κ°κ°μ μ΅°κ±΄μ— λ€ν•΄ ν•„μ”ν• μ¤λ λ“λ§ κΉ¨μΈ μ μλ‹¤.

# π’΅ Condition μ‚¬μ© μ‹ μ£Όμ μ‚¬ν•­

- Condition κ°μ²΄λ” λ‹¨μν• μΌλ° κ°μ²΄λ΅μ„ synchronized λ¬Έμ—μ„ λ€μƒμΌλ΅ μ‚¬μ©ν•κ±°λ‚, μμ²΄ λ¨λ‹ν„° wait λ° notify λ©”μ„λ“λ¥Ό νΈμ¶ν•  μ μλ‹¤.
- Condition κ°μ²΄μ λ¨λ‹ν„°λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ€ ν•΄λ‹Ή Condition κ³Ό μ—°κ²°λ Lock μ„ μ‚¬μ©ν•κ±°λ‚ await() λ° signal() λ©”μ„λ“λ¥Ό μ‚¬μ©ν•λ” κ²ƒκ³Ό νΉμ •ν• κ΄€κ³„κ°€ μ—†λ‹¤.
- νΌλ™μ„ ν”Όν•κΈ° μ„ν•΄ Condition μΈμ¤ν„΄μ¤λ¥Ό μ΄λ¬ν• λ°©μ‹μΌλ΅ μ‚¬μ©ν•μ§€ μ•λ” κ²ƒμ΄ μΆ‹λ‹¤.
