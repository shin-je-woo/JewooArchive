# ğŸ’¡ JdbcTemplate ì†Œê°œ
* SQLì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” `JdbcTemplate` ì€ ì•„ì£¼ ì¢‹ì€ ì„ íƒì§€ë‹¤. 
* `JdbcTemplate` ì€ JDBCë¥¼ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤.

### ì¥ì 
âœ… ì„¤ì •ì˜ í¸ë¦¬í•¨
* JdbcTemplateì€ `spring-jdbc` ë¼ì´ë¸ŒëŸ¬ë¦¬ì— í¬í•¨ë˜ì–´ ìˆë‹¤. (ìŠ¤í”„ë§ìœ¼ë¡œ JDBCë¥¼ ì‚¬ìš©í•  ë•Œ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬)
* ë³„ë„ì˜ ë³µì¡í•œ ì„¤ì • ì—†ì´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

âœ… ë°˜ë³µ ë¬¸ì œ í•´ê²°
* JdbcTemplateì€ í…œí”Œë¦¿ ì½œë°± íŒ¨í„´ì„ ì‚¬ìš©í•´ì„œ JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•  ë•Œ ë°œìƒí•˜ëŠ” ëŒ€ë¶€ë¶„ì˜ ë°˜ë³µ ì‘ì—…ì„ ëŒ€ì‹  ì²˜ë¦¬í•´ì¤€ë‹¤.
* ê°œë°œìëŠ” SQL ì‘ì„±, ì „ë‹¬í•  íŒŒë¦¬ë¯¸í„° ì •ì˜, ì‘ë‹µ ê°’ ë§¤í•‘ë§Œ í•˜ë©´ ëœë‹¤.
* ë‹¤ìŒê³¼ ê°™ì€ ëŒ€ë¶€ë¶„ì˜ ë°˜ë³µ ì‘ì—…ì„ ëŒ€ì‹  ì²˜ë¦¬í•´ì¤€ë‹¤.
  * `Connection` íšë“
  * `Statement` ë¥¼ ì¤€ë¹„í•˜ê³  ì‹¤í–‰
  * ê²°ê³¼(`ResultSet`)ë¥¼ ë°˜ë³µí•˜ë„ë¡ ë£¨í”„ë¥¼ ì‹¤í–‰
  * `Connection` , `Statement` , `Resultset` ì¢…ë£Œ
  * íŠ¸ëœì­ì…˜ì„ ë‹¤ë£¨ê¸° ìœ„í•œ ì»¤ë„¥ì…˜ ë™ê¸°í™”
  * ì˜ˆì™¸ ë°œìƒì‹œ ìŠ¤í”„ë§ ì˜ˆì™¸ ë³€í™˜ê¸° ì‹¤í–‰

### ë‹¨ì 
* ë™ì  SQLì„ í•´ê²°í•˜ê¸° ì–´ë µë‹¤.

# ğŸ’¡ JdbcTemplate ì ìš©1 - ê¸°ë³¸
```java
@Slf4j
public class JdbcTemplateItemRepositoryV1 implements ItemRepository {

    private final JdbcTemplate template;

    // ìƒì„±ì - JdbcTemplateì€ DataSourceê°€ í•„ìš”í•˜ë‹¤.
    public JdbcTemplateItemRepositoryV1(DataSource dataSource) {
        this.template = new JdbcTemplate(dataSource);
    }
    
    @Override
    public Item save(Item item) {
        String sql = "insert into item (item_name, price, quantity) values (?,?,?)";
        KeyHolder keyHolder = new GeneratedKeyHolder();
        // ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” update() ë¥¼ ì‚¬ìš©
        template.update(connection -> {
            // ìë™ ì¦ê°€ í‚¤ - ë°ì´í„°ë² ì´ìŠ¤ê°€ PKì¸ IDë¥¼ ëŒ€ì‹  ìƒì„±
            PreparedStatement ps = connection.prepareStatement(sql, new String[]{"id"});
            ps.setString(1, item.getItemName());
            ps.setInt(2, item.getPrice());
            ps.setInt(3, item.getQuantity());
            return ps;
        }, keyHolder);

        long key = Objects.requireNonNull(keyHolder.getKey()).longValue();
        item.setId(key);

        return item;
    }
    ...
    private RowMapper<Item> itemRowMapper() {
        return ((rs, rowNum) -> {
            Item item = new Item();
            item.setId(rs.getLong("id"));
            item.setItemName(rs.getString("item_name"));
            item.setPrice(rs.getInt("price"));
            item.setQuantity(rs.getInt("quantity"));
            return item;
        });
    }
}
```
### template.update()
* ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•Œ ì‚¬ìš©í•œë‹¤.
* INSERT, UPDATE, DELETE SQLì— ì‚¬ìš©í•œë‹¤.
* template.update() ì˜ ë°˜í™˜ ê°’ì€ int ì¸ë°, ì˜í–¥ ë°›ì€ ë¡œìš° ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.

### template.queryForObject()
* ê²°ê³¼ê°€ í•˜ë‚˜ì¼ ë•Œ ì‚¬ìš©í•œë‹¤.
* `RowMapper` ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°˜í™˜ ê²°ê³¼ì¸ `ResultSet` ì„ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.

### template.query()
* ê²°ê³¼ê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ ì‚¬ìš©í•œë‹¤.
* ë§ˆì°¬ê°€ì§€ë¡œ `RowMapper` ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°˜í™˜ ê²°ê³¼ì¸ `ResultSet` ì„ ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.

### RowMapper
* ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¡°íšŒ ê²°ê³¼ë¥¼ ê°ì²´ë¡œ ë³€í™˜í•  ë•Œ ì‚¬ìš©í•œë‹¤.
* JDBCë¥¼ ì§ì ‘ ì‚¬ìš©í•  ë•Œ `ResultSet` ë¥¼ ì‚¬ìš©í–ˆë˜ ë¶€ë¶„ì„ ë– ì˜¬ë¦¬ë©´ ëœë‹¤.
* ì°¨ì´ê°€ ìˆë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ JdbcTemplateì´ ë£¨í”„ë¥¼ ëŒë ¤ì£¼ê³ , ê°œë°œìëŠ” `RowMapper` ë¥¼ êµ¬í˜„í•´ì„œ ê·¸ ë‚´ë¶€ ì½”ë“œë§Œ ì±„ìš´ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.

## ë™ì  ì¿¼ë¦¬ ë¬¸ì œ
* ê²°ê³¼ë¥¼ ê²€ìƒ‰í•˜ëŠ” `findAll()` ì—ì„œ ì–´ë ¤ìš´ ë¶€ë¶„ì€ ì‚¬ìš©ìê°€ ê²€ìƒ‰í•˜ëŠ” ê°’ì— ë”°ë¼ì„œ ì‹¤í–‰í•˜ëŠ” SQLì´ ë™ì ìœ¼ë¡œ ë‹¬ë ¤ì ¸ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.
* ìƒí’ˆëª…(itemName)ê³¼ ìµœëŒ€ ê°€ê²©(maxPrice) ì„ ê³ ë ¤í•´ ê²€ìƒ‰í•  ê²½ìš°, ì‚¬ìš© ì—¬ë¶€ì— ë”°ë¼ 4ê°€ì§€ ê²½ìš°ê°€ ìƒê¸´ë‹¤.
```sql
select id, item_name, price, quantity from item
	where item_name like concat('%',?,'%')
	and price <= ?
```
* ì‹¤ë¬´ì—ì„œëŠ” ì´ë³´ë‹¤ í›¨ì”¬ ë” ë³µì¡í•œ ë™ì  ì¿¼ë¦¬ë“¤ì´ ì‚¬ìš©ëœë‹¤.
* ì°¸ê³ ë¡œ ì´í›„ì— ì„¤ëª…í•  MyBatisì˜ ê°€ì¥ í° ì¥ì ì€ SQLì„ ì§ì ‘ ì‚¬ìš©í•  ë•Œ ë™ì  ì¿¼ë¦¬ë¥¼ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.
