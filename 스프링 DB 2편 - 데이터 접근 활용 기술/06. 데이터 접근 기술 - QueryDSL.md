# ğŸ’¡ QueryDSL ì ìš©
```java
@Repository
@Transactional
public class JpaItemRepositoryV3 implements ItemRepository {

    private final EntityManager em;
    private final JPAQueryFactory query;

    public JpaItemRepositoryV3(EntityManager em) {
        this.em = em;
        this.query = new JPAQueryFactory(em);
    }

    // ...

    public List<Item> findAllOld(ItemSearchCond cond) {

        String itemName = cond.getItemName();
        Integer maxPrice = cond.getMaxPrice();

        BooleanBuilder builder = new BooleanBuilder();
        if (StringUtils.hasText(itemName)) {
            builder.and(item.itemName.like("%" + itemName + "%"));
        }
        if (maxPrice != null) {
            builder.and(item.price.loe(maxPrice));
        }

        List<Item> result = query
                .select(item)
                .from(item)
                .where(builder)
                .fetch();

        return result;
    }

    @Override
    public List<Item> findAll(ItemSearchCond cond) {

        String itemName = cond.getItemName();
        Integer maxPrice = cond.getMaxPrice();

        return query
                .select(item)
                .from(item)
                .where(likeItemName(itemName), maxPrice(maxPrice))
                .fetch();
    }

    private BooleanExpression likeItemName(String itemName) {
        if (StringUtils.hasText(itemName)) {
            return item.itemName.like("%" + itemName + "%");
        }
        return null;
    }

    private BooleanExpression maxPrice(Integer maxPrice) {
        if (maxPrice != null) {
            return item.price.loe(maxPrice);
        }
        return null;
    }
}
```
#### findAllOld
* Querydslì„ ì‚¬ìš©í•´ì„œ ë™ì  ì¿¼ë¦¬ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.
* `BooleanBuilder` ë¥¼ ì‚¬ìš©í•´ì„œ ì›í•˜ëŠ” `where` ì¡°ê±´ë“¤ì„ ë„£ì–´ì£¼ë©´ ëœë‹¤.
* ì´ ëª¨ë“  ê²ƒì„ ìë°” ì½”ë“œë¡œ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— ë™ì  ì¿¼ë¦¬ë¥¼ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

#### findAll
* ì•ì„œ `findAllOld` ì—ì„œ ì‘ì„±í•œ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ë¦¬íŒ©í† ë§ í–ˆë‹¤.
* Querydslì—ì„œ `where(A,B)` ì— ë‹¤ì–‘í•œ ì¡°ê±´ë“¤ì„ ì§ì ‘ ë„£ì„ ìˆ˜ ìˆëŠ”ë°, ì´ë ‡ê²Œ ë„£ìœ¼ë©´ AND ì¡°ê±´ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤. ì°¸ê³ ë¡œ `where()` ì— `null` ì„ ì…ë ¥í•˜ë©´ í•´ë‹¹ ì¡°ê±´ì€ ë¬´ì‹œí•œë‹¤.
* ì´ ì½”ë“œì˜ ë˜ ë‹¤ë¥¸ ì¥ì ì€ `likeItemName()` , `maxPrice()` ë¥¼ ë‹¤ë¥¸ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ë•Œ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ì¿¼ë¦¬ ì¡°ê±´ì„ ë¶€ë¶„ì ìœ¼ë¡œ ëª¨ë“ˆí™” í•  ìˆ˜ ìˆë‹¤.

#### ì¥ì 
* Querydsl ë•ë¶„ì— ë™ì  ì¿¼ë¦¬ë¥¼ ë§¤ìš° ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
* ì¿¼ë¦¬ ë¬¸ì¥ì— ì˜¤íƒ€ê°€ ìˆì–´ë„ ì»´íŒŒì¼ ì‹œì ì— ì˜¤ë¥˜ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤.
* ë©”ì„œë“œ ì¶”ì¶œì„ í†µí•´ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
