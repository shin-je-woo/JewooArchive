# π’΅ JWT(JSON Web Token)λ€?
- HTTPλ” κΈ°λ³Έμ μΌλ΅ state-lessλ¥Ό μ§€ν–¥ν•κ³  μκ³ , JWTλ¥Ό μ΄μ©ν•λ©΄ state-lessν•κ² μ„λ²„-ν΄λΌμ΄μ–ΈνΈ ν†µμ‹ μ΄ κ°€λ¥ν•λ‹¤.
  - state-less(λ¬΄μƒνƒ)λ€? μ„λ²„-ν΄λΌμ΄μ–ΈνΈ κµ¬μ΅°μ—μ„ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό κ°€μ§€κ³  μμ§€ μ•μ€ μƒνƒ
- μ¥μ : μ„λ²„μ ν™•μ¥μ„±μ΄ λ†’λ‹¤. (scale-out)
- λ‹¨μ : state-ful λ°©μ‹λ³΄λ‹¤ λΉ„κµμ  λ§μ€ μ–‘μ λ°μ΄ν„°κ°€ λ°λ³µμ μΌλ΅ μ „μ†΅λλ―€λ΅ λ„¤νΈμ›ν¬ μ„±λ¥μ €ν•κ°€ λ  μ μλ‹¤.
- λ‹¨μ : λ°μ΄ν„° λ…Έμ¶λ΅ μΈν• λ³΄μ•λ¬Έμ κ°€ λ°μƒν•  μ μλ‹¤.

# π’΅ JWT κµ¬μ΅°
- JWTλ” μ (.)μΌλ΅ κµ¬λ¶„λ 3κ°μ ννΈλ΅ κµ¬μ„±λλ‹¤.
  - ν—¤λ”(Header)
  - νμ΄λ΅λ“(Payload)
  - μ„λ…(Signature)
- xxxxx.yyyyy.zzzzz

## ν—¤λ”(Header)
- ν—¤λ”λ” μΌλ°μ μΌλ΅ 2κ°λ΅ μ΄λ£¨μ–΄μ Έ μλ‹¤.
  - ν† ν°νƒ€μ…
  - μ•”νΈν™” μ•κ³ λ¦¬μ¦(μλ¥Ό λ“¤μ–΄,  HMAC SHA256 μΈμ§€ RSAμΈμ§€)

```JSON
{
  "alg": "HS256",
  "typ": "JWT"
}
```

## νμ΄λ΅λ“ (Payload)
- νμ΄λ΅λ“λ” ν΄λ μ„μΌλ΅ κµ¬μ„±λμ–΄ μλ‹¤.
- ν΄λ μ„μ€ μ—”ν‹°ν‹°(μΌλ°μ μΌλ΅ μ‚¬μ©μμ •λ³΄) λ° μ¶”κ°€λ°μ΄ν„°μ— λ€ν• μ„¤λ…μ΄λ‹¤.
- ν΄λ μ„μ€ λ°μ΄ν„° μ¶•μ†λ¥Ό μ„ν•΄ μΌλ°μ μΌλ΅ 3κΈ€μλ¥Ό κ¶μ¥ν•λ‹¤.
- ν΄λ μ„μ—λ” λ“±λ΅λ ν΄λ μ„(registered), κ³µκ° ν΄λ μ„(public), λΉ„κ³µκ° ν΄λ μ„(private) μ„Έ κ°€μ§€ μ ν•μ΄ μλ‹¤ .

### λ“±λ΅λ ν΄λ μ„ (Registered claims)
- ν•„μλ” μ•„λ‹μ§€λ§ κ¶μ¥λλ” λ―Έλ¦¬ μ •μλ ν΄λ μ„ μ§‘ν•©
- iss(issuer) : ν† ν° λ°κΈ‰μ
- sub(subject) : ν† ν° μ λ© - μΌλ°μ μΌλ΅ μ‚¬μ©μμ— λ€ν• μ‹λ³„ κ°’
- aud(audience) : ν† ν° λ€μƒμ
- exp(expiration time) : ν† ν° λ§λ£ μ‹κ°„, μ‹κ°„μ€ NumericDate ν•μ‹μΌλ΅ λμ–΄μμ–΄μ•Ό ν•λ©° (μ: 1480849147370) μ–Έμ λ‚ ν„μ¬ μ‹κ°„λ³΄λ‹¤ μ΄ν›„λ΅ μ„¤μ •λμ–΄ μμ–΄μ•Ό ν•λ‹¤.
- iat(issued at) : ν† ν° λ°κΈ‰ μ‹κ°„

### κ³µκ° ν΄λ μ„ (Public claims)
- κ³µκ° ν΄λ μ„λ“¤μ€ μ¶©λμ΄ λ°©μ§€λ (collision-resistant) μ΄λ¦„μ„ κ°€μ§€κ³  μμ–΄μ•Ό ν•λ‹¤.
- μ¶©λμ„ λ°©μ§€ν•κΈ° μ„ν•΄μ„ ν΄λ μ„ μ΄λ¦„μ„ URI ν•μ‹μΌλ΅ μ§€μ–΄μ•Ό ν•λ‹¤.

```JSON
{
    "https://github.com/shin-je-woo": true
}
```

### λΉ„κ³µκ° ν΄λ μ„ (Private claims)
- λ“±λ΅λ ν΄λ μ„λ„μ•„λ‹κ³ , κ³µκ°λ ν΄λ μ„λ“¤λ„ μ•„λ‹λ‹¤.
- ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν‘μν•μ— μ‚¬μ©λλ” λ§μ¶¤ ν΄λ μ„μ΄λ‹¤.

```JSON
{
    "username": "shinjewoo"
}
```

## μ„λ… (Signature)
- μ„λ…μ€ μΈμ½”λ”©λ ν—¤λ”, μΈμ½”λ”©λ νμ΄λ΅λ“λ¥Ό ν•©μΉ ν›„ μ£Όμ–΄μ§„ λΉ„λ°€ν‚¤λ΅ ν•΄μ‹ν•μ—¬ μƒμ„±ν•λ‹¤.
- μλ¥Ό λ“¤μ–΄ HMAC SHA256 μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ” κ²½μ° μ„λ…μ€ λ‹¤μκ³Ό κ°™μ€ λ°©μ‹μΌλ΅ μƒμ„±λλ‹¤.

```
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  secret)
```
- μ„λ…μ€ λ©”μ‹μ§€κ°€ λ„μ¤‘μ— λ³€κ²½λμ§€ μ•μ•λ”μ§€ ν™•μΈν•λ” λ° μ‚¬μ©λλ‹¤.
- μ„λ²„κ°€ κ°μΈν‚¤λ¥Ό κ°€μ§€κ³  Signatureλ¥Ό λ³µνΈν™”ν• λ‹¤μ, ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ ν† ν°μ headerκ°€ λ³µνΈν™”λ headerμ™€ μΌμΉν•λ”μ§€, ν† ν°μ payloadκ°€ λ³µνΈν™”λ payloadμ™€ μΌμΉν•λ”μ§€ ν™•μΈν•λ‹¤.
- λ§μ•½ ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ header, payloadκ°€ λ³µνΈν™”λ header, payloadμ™€ λ‹¤λ¥΄λ‹¤λ©΄ λ³€μ΅°λ ν† ν°μΌλ΅ μΈμ§€ν•  μ μλ‹¤.
