# ğŸ’¡ JpaItemWriter

- JPA Entity ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ë©° EntityManagerFactoryë¥¼ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•œë‹¤.
- Entityë¥¼ í•˜ë‚˜ì”© chunkí¬ê¸° ë§Œí¼ persist í˜¹ì€ mergeí•œ ë‹¤ìŒ flush í•œë‹¤.
- ë‹¨, Entityì˜ Idìƒì„±ì „ëµì´ `@GeneratedValue(strategy = GenerationType.IDENTITY)`ì¼ ê²½ìš° flushì‹œì ì´ ì•„ë‹Œ persistë‚˜ mergeí˜¸ì¶œ ì¦‰ì‹œ insertì¿¼ë¦¬ê°€ ë°œìƒí•œë‹¤.
- ItemReaderë‚˜ ItemProcessorë¡œë¶€í„° ì•„ì´í…œì„ ì „ë‹¬ ë°›ì„ ë•ŒëŠ” Entity í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ë°›ì•„ì•¼ í•œë‹¤.

![image](https://github.com/user-attachments/assets/1ae677fb-ade4-4b04-9669-f59f3d3a8a3f)

- usePersistì˜ ê¸°ë³¸ê°’ì€ falseì´ë¯€ë¡œ ê¸°ë³¸ë™ì‘ì€ mergeì´ë‹¤.

![image](https://github.com/user-attachments/assets/95e5be61-3fbd-4aee-a2dd-5e37ad523bf2)

```java
@Bean
public JpaItemWriter<ConvertedCustomer> itemWriter() {
    return new JpaItemWriterBuilder<ConvertedCustomer>()
        .usePersist(true)
        .entityManagerFactory(entityManagerFactory)
        .build();
}
```

![image](https://github.com/user-attachments/assets/924d8658-79c8-427e-9479-4cf5787c21b9)

![image](https://github.com/user-attachments/assets/d3ac7ccd-f6eb-4f53-8727-096ecee5a832)
