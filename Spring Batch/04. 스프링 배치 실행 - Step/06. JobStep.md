# ğŸ’¡ JobStep

- ì™¸ë¶€ì˜ Jobì„ ì‹¤í–‰í•˜ëŠ” Step
- ì™¸ë¶€ì˜ Jobì´ ì‹¤íŒ¨í•˜ë©´ í•´ë‹¹ Stepì´ ì‹¤íŒ¨í•˜ë¯€ë¡œ ê²°êµ­ ê¸°ë³¸ Jobë„ ì‹¤íŒ¨í•œë‹¤.
- ëª¨ë“  ë©”íƒ€ë°ì´í„°ëŠ” ê¸°ë³¸ Jobê³¼ ì™¸ë¶€ Job ë³„ë¡œ ê°ê° ì €ì¥ëœë‹¤.
- ì»¤ë‹¤ë€ ì‹œìŠ¤í…œì„ ì‘ì€ ëª¨ë“ˆë¡œ ìª¼ê°œê³  Jobì˜ íë¦„ì„ ê´€ë¦¬í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

# ğŸ’¡ API ì„¤ì •

![image](https://github.com/user-attachments/assets/325942ca-db81-4ae6-8d22-73b508a2141e)

# ğŸ’¡ êµ¬ì¡°ë„

![image](https://github.com/user-attachments/assets/ad820a95-621e-45ba-b973-88241a0b6a7c)

![image](https://github.com/user-attachments/assets/8b61242f-c40a-463a-b433-77d05b05a29d)

# ğŸ’¡ ì˜ˆì œ ì½”ë“œ

```java
@Configuration
@RequiredArgsConstructor
public class JobStepConfiguration {
    private final JobRepository jobRepository;
    private final PlatformTransactionManager transactionManager;
    private final JobLauncher jobLauncher;

    @Bean
    public Job parentJob() {
        return new JobBuilder("parentJob", jobRepository)
            .start(jobStep())
            .next(step2())
            .build();
    }

    @Bean
    public Step jobStep() {
        return new StepBuilder("jobStep", jobRepository)
            .job(childJob())
            .launcher(jobLauncher)
            .parametersExtractor(jobParametersExtractor())
            .listener(new StepExecutionListener() {
                @Override
                public void beforeStep(final StepExecution stepExecution) {
                    stepExecution.getExecutionContext().put("name", "user1");
                }
            })
            .build();
    }

    public JobParametersExtractor jobParametersExtractor() {
        final DefaultJobParametersExtractor jobParametersExtractor = new DefaultJobParametersExtractor();
        jobParametersExtractor.setKeys(new String[]{"name"});
        return jobParametersExtractor;
    }


    @Bean
    public Job childJob() {
        return new JobBuilder("childJob", jobRepository)
            .start(step1())
            .build();
    }

    @Bean
    public Step step1() {
        return new StepBuilder("step1", jobRepository)
            .tasklet(((contribution, chunkContext) -> {
//                throw new RuntimeException("ì¼ë¶€ëŸ¬ ë‚´ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤.");
                return RepeatStatus.FINISHED;
            }), transactionManager)
            .build();
    }

    @Bean
    public Step step2() {
        return new StepBuilder("step2", jobRepository)
            .tasklet(((contribution, chunkContext) -> {
                throw new RuntimeException("ì¼ë¶€ëŸ¬ ë‚´ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤.");
//                return RepeatStatus.FINISHED;
            }), transactionManager)
            .build();
    }
}
```

![image](https://github.com/user-attachments/assets/eb6dc8f5-edb6-40f6-b1db-5124227dcb2b)

- ë©”íƒ€ë°ì´í„° BATCH_JOB_INSTANCEë¥¼ ë³´ë©´ ê¸°ë³¸ Job, ì™¸ë¶€ Job ê°ê° ë³„ë„ë¡œ ê´€ë¦¬ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
- ì™¸ë¶€ Jobì´ ì‹¤íŒ¨í•  ê²½ìš° JobStepì´ ì‹¤íŒ¨í•œë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ê¸°ë³¸ Jobë„ ì‹¤íŒ¨í•œë‹¤.

![image](https://github.com/user-attachments/assets/cc23682c-9746-4f03-a6e9-3b3140b9a0cd)

- ë©”íƒ€ë°ì´í„° BATCH_JOB_EXECUTION_PARAMSë¥¼ ë³´ë©´ ì™¸ë¶€ Jobì„ ì‹¤í–‰í•  ë•Œ JobParametersExtractorì— ì˜í•´ JobStepì˜ ExcutionContextë¥¼ JobParametersë¡œ ë³€í™˜í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
