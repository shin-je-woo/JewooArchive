# ğŸ’¡ Repeat

- Spring BatchëŠ” ì‘ì—…ì„ ì–¼ë§ˆë‚˜ ë°˜ë³µí•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ ì¤„ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
- íŠ¹ì • ì¡°ê±´ì´ ì¶©ì¡± ë  ë•Œê¹Œì§€ Job ë˜ëŠ” Stepì„ ë°˜ë³µí•˜ë„ë¡ ë°°ì¹˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.
- ìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œëŠ” Stepì˜ ë°˜ë³µê³¼ Chunk ë°˜ë³µì„ `RepeatOperation`ì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬í•˜ê³  ìˆë‹¤.
- ê¸°ë³¸ êµ¬í˜„ì²´ë¡œ `RepeatTemplate`ì„ ì œê³µí•œë‹¤.

```java
public interface RepeatOperations {
    RepeatStatus iterate(RepeatCallback callback) throws RepeatException;
}
```

- ì½œë°±ì€ ë°˜ë³µë  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‚½ì…í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

```java
public interface RepeatCallback {
    RepeatStatus doInIteration(RepeatContext context) throws Exception;
}
```

![image](https://github.com/user-attachments/assets/def5f57e-1ee9-43de-919f-08de7fd812f4)

# ğŸ’¡ ë°˜ë³µ ì¢…ë£Œ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” 3ê°€ì§€ ìš”ì†Œ

### RepeatStatus

- ìŠ¤í”„ë§ ë°°ì¹˜ì˜ ì²˜ë¦¬ì˜ ì¢…ë£Œ ì—¬ë¶€ë¥¼ íŒë³„í•˜ê¸° ìœ„í•œ ì—´ê±°í˜•(enum)
- CONTINUABLE - ì‘ì—…ì´ ë‚¨ì•„ ìˆìŒ
- FINISHED - ë” ì´ìƒì˜ ë°˜ë³µ ì—†ìŒ

### CompletionPolicy

- RepeatTemplateì˜ iterate ë©”ì†Œë“œ ì•ˆì—ì„œ ë°˜ë³µì„ ì¤‘ë‹¨í• ì§€ ê²°ì •
- ì‹¤í–‰ íšŸìˆ˜ ë˜ëŠ” ì™„ë£Œì‹œê¸°, ì˜¤ë¥˜ ë°œìƒì‹œ ìˆ˜í–‰ í•  ì‘ì—…ì— ëŒ€í•œ ë°˜ë³µì—¬ë¶€ ê²°ì •
- ì •ìƒ ì¢…ë£Œë¥¼ ì•Œë¦¬ëŠ”ë° ì‚¬ìš©ëœë‹¤.

![image](https://github.com/user-attachments/assets/648d9fb5-79e0-4a26-8fd4-3bfe21f8e3a8)

### ExceptionHandler

- RepeatCallback ì•ˆì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ RepeatTemplateì´ ExceptionHandlerë¥¼ ì°¸ì¡°í•´ì„œ ì˜ˆì™¸ë¥¼ ë‹¤ì‹œ ë˜ì§ˆì§€ ì—¬ë¶€ ê²°ì •
- ì˜ˆì™¸ë¥¼ ë°›ì•„ì„œ ë‹¤ì‹œ ë˜ì§€ê²Œ ë˜ë©´ ë°˜ë³µ ì¢…ë£Œ
- ë¹„ì •ìƒ ì¢…ë£Œë¥¼ ì•Œë¦¬ëŠ”ë° ì‚¬ìš©ëœë‹¤.

![image](https://github.com/user-attachments/assets/83fdea24-5f99-4041-bcf3-a4078766209b)

# ğŸ’¡ íë¦„ë„

![image](https://github.com/user-attachments/assets/bf671949-2912-49e0-9705-1e3aa5c12ddc)

![image](https://github.com/user-attachments/assets/f5d9a70a-fb9f-4047-9584-245ae41f925d)

# ğŸ’¡ ì˜ˆì œ

![image](https://github.com/user-attachments/assets/8b3c6758-906a-4125-95c5-b20df96d5d40)

- ìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œëŠ” Stepì˜ ë°˜ë³µêµ¬ê°„ê³¼ Chunkì˜ ë°˜ë³µêµ¬ê°„ ë•Œ RepeatTemplateì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
- ìŠ¤í”„ë§ ë°°ì¹˜ì—ì„œ ì œê³µí•˜ëŠ” êµ¬í˜„ì²´ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
