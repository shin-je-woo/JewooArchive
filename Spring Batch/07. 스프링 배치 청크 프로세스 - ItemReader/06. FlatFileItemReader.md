# ğŸ’¡ FlatFileItemReader ê°œë… ë° API

- 2ì°¨ì› ë°ì´í„°(í‘œ)ë¡œ í‘œí˜„ëœ ìœ í˜•ì˜ íŒŒì¼ì„ ì²˜ë¦¬í•˜ëŠ” ItemReader
- ì¼ë°˜ì ìœ¼ë¡œ ê³ ì • ìœ„ì¹˜ë¡œ ì •ì˜ëœ ë°ì´í„° í•„ë“œë‚˜ íŠ¹ìˆ˜ ë¬¸ìì— ì˜í•´ êµ¬ë³„ëœ ë°ì´í„°ì˜ í–‰ì„ ì½ëŠ”ë‹¤.
- Resourceì™€ LineMapper ë‘ ê°€ì§€ ìš”ì†Œê°€ í•„ìš”í•˜ë‹¤.

![image](https://github.com/user-attachments/assets/07c3ebac-b811-4927-b467-a57b083894ec)

# ğŸ’¡ Resource

- FileSystemResource â€“ new FileSystemResource(â€œresource/path/config.xmlâ€)
- ClassPathResource â€“ new ClassPathResource(â€œclasspath:path/config.xml)

# ğŸ’¡ LineMapper

- íŒŒì¼ì˜ ë¼ì¸ í•œì¤„ì„ Objectë¡œ ë³€í™˜í•´ì„œ FlatFileItemReaderë¡œ ë¦¬í„´í•œë‹¤.
- LineMapperëŠ” ê°€ê³µë˜ì§€ ì•Šì€ Raw Line(ë¬¸ìì—´ í•œ ì¤„)ì„ ì œê³µë°›ê¸° ë•Œë¬¸ì— ì´ ë¬¸ìì—´ì€ ë¨¼ì € FieldSetìœ¼ë¡œ í† í°í™”ë˜ì–´ì•¼ í•˜ë©°, ê·¸ëŸ° ë‹¤ìŒ ê°ì²´ë¡œ ë§¤í•‘ë  ìˆ˜ ìˆë‹¤.
- LineTokenizerì™€ FieldSetMapperë¥¼ ì‚¬ìš©í•´ì„œ ê°ì²´ë¡œ ë§¤í•‘í•œë‹¤.

``` java
public interface LineMapper<T> {

    T mapLine(String line, int lineNumber) throws Exception;

}
```

### FieldSet

- FieldSetì€ Spring Batchì—ì„œ íŒŒì¼ ë¦¬ì†ŒìŠ¤ì˜ í•„ë“œë¥¼ ë°”ì¸ë”©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¶”ìƒí™”ì´ë‹¤.
- FieldSetì€ ë¬¸ìì—´ ë°°ì—´ í˜•íƒœì˜ í† í°(String array of tokens)ì„ ìœ ì¼í•œ ì¸ìë¡œ í•„ìš”ë¡œ í•œë‹¤.
- ì„ íƒì ìœ¼ë¡œ í•„ë“œì˜ ì´ë¦„ì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆìœ¼ë©°, ì´ë¥¼ í†µí•´ í•„ë“œë¥¼ ì¸ë±ìŠ¤ ë˜ëŠ” ì´ë¦„ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
- ì¦‰, ë¼ì¸ì„ í•„ë“œë¡œ êµ¬ë¶„í•´ì„œ ë§Œë“  ë°°ì—´ í† í°ì„ ê°€ì§€ê³  ìˆì–´ í† í° í•„ë“œë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
- JDBCì˜ ResultSetê³¼ ìœ ì‚¬í•˜ë‹¤ ex) fs.readString(0), fs.readString(â€œnameâ€)

### LineTokenizer

- ì…ë ¥ ë¼ì¸ì„ FieldSetìœ¼ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ ì¶”ìƒí™”ê°€ í•„ìš”í•œ ì´ìœ ëŠ”, ë‹¤ì–‘í•œ í˜•ì‹ì˜ Flat íŒŒì¼ ë°ì´í„°ê°€ FieldSetìœ¼ë¡œ ë³€í™˜ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
- Spring Batchì—ì„œëŠ” ì´ë¥¼ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ LineTokenizerë¥¼ ì œê³µí•œë‹¤.
- ì¦‰, ì…ë ¥ë°›ì€ ë¼ì¸ì„ FieldSetìœ¼ë¡œ ë³€í™˜í•´ì„œ ë¦¬í„´í•œë‹¤.

```java
public interface LineTokenizer {

    FieldSet tokenize(String line);

}
```

- Spring BatchëŠ” ë‹¤ìŒê³¼ ê°™ì€ LineTokenizer êµ¬í˜„ì²´ë¥¼ ì œê³µí•œë‹¤.
  - DelimitedLineTokenizer
  - FixedLengthTokenizer
  - PatternMatchingCompositeLineTokenizer

### FieldSetMapper

- FieldSet ê°ì²´ë¥¼ ë°›ì•„ì„œ ì›í•˜ëŠ” ê°ì²´ë¡œ ë§¤í•‘í•´ì„œ ë¦¬í„´í•œë‹¤.
- JdbcTemplate ì˜ RowMapperì™€ ë™ì¼í•œ íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.

```java
public interface FieldSetMapper<T> {

    T mapFieldSet(FieldSet fieldSet) throws BindException;

}
```

# ğŸ’¡ LineMapper êµ¬ì¡°ë„

![image](https://github.com/user-attachments/assets/b2967a9d-8208-4907-827b-3c374fb54421)

![image](https://github.com/user-attachments/assets/9177ccb4-5ab5-4f5d-8a33-400650761e88)

# ğŸ’¡ API ì„¤ì •

![image](https://github.com/user-attachments/assets/e3cc6923-3a48-4b5c-a0c3-1c72fcd982a4)
