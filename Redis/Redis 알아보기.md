# 💡 Redis 란?
- 레디스는 **Remote Dictionary Server** 의 약자로, "key-value" 구조의 In-Memory 데이터 저장소이다.
- 다양한 자료구조를 지원하여 개발의 편의성이 좋아지고 난이도가 낮아진다는 장점이 있다.
- 최신 버전의 레디스는 PUB/SUB 형태의 기능을 제공하여 메세지를 전달할 수 있다.
- 즉, 데이터 저장 뿐만 아니라 다양한 목적으로 사용할 수 있다.
- 레디스는 메모리에 데이터를 저장하기 때문에 저장 공간에 제약이 있어, 주로 보조 데이터 저장소로 사용한다.
- 이를 극복하기 위해 레디스 클러스터 기능을 제공하고 있어 저장 공간을 확장할 수 있다.
- 또한 저장된 데이터를 영구적으로 디스크에 저장할 수 있는 백업 기능을 제공하므로 애플리케이션의 주 저장소로 사용할 수도 있다.
- 메모리에 데이터를 저장하기 때문에 빠른 처리 속도가 장점이다.
- 레디스 내부에서 명령어를 처리하는 부분은 싱글 스레드 아키텍처로 구현되어 있다. 멀티 스레드 아키텍처보다 구조가 단단하게 설계되어 여러 장점이 있다.

# 💡 Redis 특징
### 레디스는 싱글스레드로 동작한다.
- 레디스는 사용자들이 실행한 명령어들을 이벤트 루프(event loop) 방식으로 처리한다.
- 즉, 클라이언트가 실행한 명령어들을 Event Queue에 적재하고 싱글 스레드로 하나씩 처리한다.
- 메모리를 사용하기 때문에 싱글 스레드로 데이터를 빠르게 처리할 수 있다.

#### 장점
- 멀티 스레드 환경이 아니라 **Context Switch** 발생 X → 효율적인 시스템 리소스 사용 가능
- 위와 같은 이유로 **Deadlock** 발생 X

#### 단점
- 싱글 스레드이므로 전체 데이터 스캔과 같은 오버헤드가 큰 명령어를 처리하는 동안 다른 명령어 처리 불가.
- 이 때, 다른 명령어들은 이벤트 큐에 저장되어 있는 시간이 길어짐. → 응답 속도 저하

# 💡 Redis Persistence(영속성)
- Redis는 주로 캐시로 사용되지만 데이터 영속성을 위한 옵션을 제공한다.
- 레디스는 메모리에 데이터를 관리하므로 매우 빠른 속도로 데이터를 저장 및 조회할 수 있다.
- 하지만 메모리 특성상 저장된 데이터는 사라질 가능성이 있다. (휘발성)
- 이를 보완하고자 레디스는 관리하고 있는 데이터에 영속성을 제공한다.
- 즉, 메모리에 있는 데이터를 디스크에 백업하는 기능을 제공하고, 대표적으로 2가지 방식이 있다.
  - RDB 방식
  - AOF 방식

### RDB (Redis Database)
- 메모리에 있는 데이터 전체에서 스냅샷을 작성하고, 이를 디스크로 저장하는 방식
- 특정 시간마다 스냅샷을 생성하고, 데이터를 복원해야 한다면 스냅샷 파일을 그대로 로딩만 하면 됨.
- 하지만, 스냅샷 이후 변경된 데이터는 복구할 수 없음. → 데이터 유실(loss) 가능성 존재
- 스냅샷 생성 중 클라이언트 요청 지연이 발생할 수 있다.

### AOF (Append Only File)
- Redis에 적용되는 Write 작업을 모두 log로 저장하는 방식
- 데이터를 생성, 수정, 삭제하는 이벤트를 초 단위로 취합 및 로그 파일에 작성
- 모든 데이터의 변경 기록들을 보관하고 있으므로 최신 데이터 정보를 백업 가능
- 데이터 유실의 위험이 적지만, 재난 복구시 Write 작업을 다시 적용하기 때문에 RDB 보다 느리다.

### RDB + AOF
- 일부 데이터 손실에 영향을 받지 않는 경우(캐시로만 사용할 때), **RDB**   
- 장애 상황 직전까지의 모든 데이터가 보장되어야 할 경우, **AOF**   
- 강력한 내구성이 필요한 경우, **RDB + AOF**   
- 레디스는 일반적으로 AOF와 RDB를 동시에 사용하여 데이터를 백업한다. (ex. 매일 7시마다 RDB 스냅샷을 생성하고, RDB 생성 이후에 변경되는 데이터는 AOF로 백업)

# 💡 Redis 활용 사례
#### 주 데이터 저장소
- AOF, RDB 백업 기능과 레디스 아키텍처를 사용하여 주 저장소로 데이터를 저장할 수 있다.
- 하지만 메모리 특성상 용량이 큰 데이터 저장소로는 적절하지 않다.

#### Caching
- 인메모리 데이터 저장소이므로 주 저장소의 데이터를 캐시하여 빠르게 데이터를 읽을 수 있다.
- 캐시된 데이터는 한곳에 저장되는 중앙 집중형 구조로 구성한다. → 데이터 일관성 유지 가능

#### 분산 락(distributed lock)
- 분산 환경에서 여러 시스템이 동시에 데이터를 처리 할 때는 특정 공유 자원의 사용 여부를 검증하여 데드 락을 방지할 필요가 있다.
- 이때 레디스를 분산 락으로 사용할 수 있다.

#### 순위 계산
- 레디스에서 제공하는 ZSet(Sorted Set) 자료 구조를 이용하여 순위 계산 용도로 사용하기도 한다.
- ZSet은 정렬 기능이 포함된 Set 자료 구조이므로 쉽고 빠르게 순위를 계산할 수 있다.
